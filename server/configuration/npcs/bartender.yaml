bartender:
  tree:
    start:
      dialog:
        - line: |
            <npc> says "Take a seat, or don't... I don't car..."

    start_shopping:
      append_to: start
      options:
        - line: |
            ask about wares
          goto: shopping

    shopping:
      dialog:
        - line: |
            <npc> says "I got plenty to sell!"
        - line: |
            <npc> says "What can I get ya?"
        - line: |
            <npc> says "Need anything?"
      options:
        #- line: |
        #    purchase one Green Potion for 60 Scrap
        #  goto: shopping
        #  trade:
        #    give_to_player:
        #      - item: potion_hp_30
        #        amount: 1
        #    give_to_npc:
        #      - item: currency_0
        #        amount: 60
        - line: |
            purchase one Simple Dinner for 1 Scrap
          goto: shopping
          trade:
            give_to_player:
              - item: tavern_food_item_mug_of_ale
                amount: 1
            give_to_npc:
              - item: currency_0
                amount: 1
        - line: |
            purchase one Simple Dinner for 2 Scrap
          goto: shopping
          trade:
            give_to_player:
              - item: tavern_food_item_dinner_0
                amount: 1
            give_to_npc:
              - item: currency_0
                amount: 2
        - line: |
            purchase one Medium Dinner for 4 Scrap
          goto: shopping
          trade:
            give_to_player:
              - item: tavern_food_item_dinner_1
                amount: 1
            give_to_npc:
              - item: currency_0
                amount: 4
        - line: |
            purchase one Heavy Dinner for 6 Scrap
          goto: shopping
          trade:
            give_to_player:
              - item: tavern_food_item_dinner_2
                amount: 1
            give_to_npc:
              - item: currency_0
                amount: 6



    start_cheese:
      append_to: start
      options:
        - line: |
            ask about quests
          goto: cheese_quest_not_started
          quest_start: 
            id: bartender_rat_cheese
          quest_check:
          - id: bartender_rat_cheese
            state: not_started

        - line: |
            ask about quests
          goto: cheese_quest_in_progress
          quest_check:
          - id: bartender_rat_cheese
            state: in_progress

        - line: |
            ask about quests
          goto: cheese_quest_completed
          quest_turn_in:
            id: bartender_rat_cheese
            reward_exp: 4
            reward:
              - item: currency_0
                amount: 25
          quest_check:
          - id: bartender_rat_cheese
            state: completed
          
    

    cheese_quest_not_started:
      dialog:
        - line: |
            <npc> says "I've ran out of cheese, can you get me some?"

    cheese_quest_in_progress:
      dialog:
        - line: |
            <npc> says "Cheese.. damn it, cheese"

    cheese_quest_completed:
      dialog:
        - line: |
            <npc> says "MmmmMmm Cheemse..."
